# ğŸ¯ å¡”ç½—ç‰Œå åœåº”ç”¨ - ApacheæœåŠ¡å™¨é…ç½®
# ğŸŒ Tarot Cards Application - Apache Server Configuration

# ğŸ”’ å®‰å…¨é…ç½®
<Files ".env">
    Order allow,deny
    Deny from all
</Files>

<Files "*.log">
    Order allow,deny
    Deny from all
</Files>

# ğŸŒ UTF-8ç¼–ç è®¾ç½®
AddDefaultCharset UTF-8
<IfModule mod_mime.c>
    AddCharset UTF-8 .html
    AddCharset UTF-8 .css
    AddCharset UTF-8 .js
    AddCharset UTF-8 .xml
    AddCharset UTF-8 .txt
</IfModule>

# ğŸ“¦ å‹ç¼©é…ç½®
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# ğŸ—‚ï¸ ç¼“å­˜é…ç½®
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 6 months"
    ExpiresByType image/jpg "access plus 6 months"
    ExpiresByType image/jpeg "access plus 6 months"
    ExpiresByType image/gif "access plus 6 months"
    ExpiresByType image/ico "access plus 6 months"
    ExpiresByType image/svg+xml "access plus 6 months"
    ExpiresByType text/html "access plus 1 week"
    ExpiresByType application/xml "access plus 1 week"
</IfModule>

# ğŸ”„ é‡å®šå‘é…ç½®
# ç§»é™¤wwwå‰ç¼€
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^ https://%1%{REQUEST_URI} [L,R=301]
</IfModule>

# ğŸš« é˜²æ­¢è®¿é—®æ•æ„Ÿæ–‡ä»¶
<FilesMatch "^\.(htaccess|htpasswd|env|log)">
    Order allow,deny
    Deny from all
</FilesMatch>

# ğŸ” SEOå‹å¥½URL
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.html [L,QSA]
</IfModule>

# ğŸŒ è·¨åŸŸèµ„æºå…±äº«(CORS)
<IfModule mod_headers.c>
    <FilesMatch "\.(css|js|json|xml|png|jpg|jpeg|gif|svg|ico)$">
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
        Header set Access-Control-Allow-Headers "Content-Type"
    </FilesMatch>
</IfModule>

# ğŸ›¡ï¸ å®‰å…¨å¤´éƒ¨
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    Header always set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self';"
</IfModule>

# ğŸ“Š é”™è¯¯é¡µé¢é…ç½®
ErrorDocument 404 /index.html
ErrorDocument 403 /index.html
ErrorDocument 500 /index.html